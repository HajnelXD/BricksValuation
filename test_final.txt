============================= test session starts ==============================
platform linux -- Python 3.14.0, pytest-8.4.2, pluggy-1.6.0
django: version: 5.2.7, settings: config.settings (from ini)
rootdir: /app
configfile: setup.cfg
plugins: cov-7.0.0, django-4.11.1
collected 277 items

account/serializers/tests/test_registration_serializer.py ....           [  1%]
account/serializers/tests/test_user_profile_serializer.py ............   [  5%]
account/services/tests/test_login_service.py .........                   [  9%]
account/services/tests/test_logout_service.py ...                        [ 10%]
account/services/tests/test_registration_service.py ......               [ 12%]
account/services/tests/test_user_profile_service.py ...........          [ 16%]
account/tests/test_authentication.py ..........                          [ 19%]
account/views/tests/test_login_throttle.py ...                           [ 20%]
account/views/tests/test_login_view.py ...............                   [ 26%]
account/views/tests/test_logout_view.py ......                           [ 28%]
account/views/tests/test_register_view.py ...                            [ 29%]
account/views/tests/test_user_profile_view.py ..............             [ 34%]
catalog/serializers/tests/test_brickset_create_serializer.py ........... [ 38%]
.......                                                                  [ 41%]
catalog/serializers/tests/test_brickset_list_serializer.py ............. [ 45%]
.......................                                                  [ 54%]
catalog/services/tests/test_brickset_create_service.py FFFFFFFFF.FF..FFF [ 60%]
                                                                         [ 60%]
catalog/services/tests/test_brickset_list_service.py ................... [ 67%]
..........                                                               [ 70%]
catalog/views/tests/test_brickset_create_view.py FFFF.FFFFFFF......F     [ 77%]
catalog/views/tests/test_brickset_list_view.py ......................... [ 86%]
............                                                             [ 90%]
account/serializers/tests/test_login_serializer.py ...............       [ 96%]
account/services/tests/test_token_provider.py ..........                 [100%]

=================================== FAILURES ===================================
_ CreateBrickSetServiceTests.test_execute_allows_same_number_different_completeness _

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_allows_same_number_different_completeness>

    def test_execute_allows_same_number_different_completeness(self) -> None:
        """execute() allows same number with different completeness."""
        command1 = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
>       self.service.execute(command1, self.user)

catalog/services/tests/test_brickset_create_service.py:226: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
_ CreateBrickSetServiceTests.test_execute_allows_same_number_different_has_box _

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_allows_same_number_different_has_box>

    def test_execute_allows_same_number_different_has_box(self) -> None:
        """execute() allows same number with different has_box."""
        command1 = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
>       self.service.execute(command1, self.user)

catalog/services/tests/test_brickset_create_service.py:274: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
_ CreateBrickSetServiceTests.test_execute_allows_same_number_different_has_instructions _

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_allows_same_number_different_has_instructions>

    def test_execute_allows_same_number_different_has_instructions(self) -> None:
        """execute() allows same number with different has_instructions."""
        command1 = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
>       self.service.execute(command1, self.user)

catalog/services/tests/test_brickset_create_service.py:250: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
_ CreateBrickSetServiceTests.test_execute_allows_same_number_different_is_factory_sealed _

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_allows_same_number_different_is_factory_sealed>

    def test_execute_allows_same_number_different_is_factory_sealed(self) -> None:
        """execute() allows same number with different is_factory_sealed."""
        command1 = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
>       self.service.execute(command1, self.user)

catalog/services/tests/test_brickset_create_service.py:298: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
_ CreateBrickSetServiceTests.test_execute_allows_same_number_different_production_status _

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_allows_same_number_different_production_status>

    def test_execute_allows_same_number_different_production_status(self) -> None:
        """execute() allows same number with different production_status."""
        command1 = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
>       self.service.execute(command1, self.user)

catalog/services/tests/test_brickset_create_service.py:201: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
___ CreateBrickSetServiceTests.test_execute_creates_brickset_with_all_fields ___

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_creates_brickset_with_all_fields>

    def test_execute_creates_brickset_with_all_fields(self) -> None:
        """execute() successfully creates BrickSet with all fields."""
        command = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
            owner_initial_estimate=360,
        )
    
>       result = self.service.execute(command, self.user)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/services/tests/test_brickset_create_service.py:37: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
__ CreateBrickSetServiceTests.test_execute_creates_brickset_without_estimate ___

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_creates_brickset_without_estimate>

    def test_execute_creates_brickset_without_estimate(self) -> None:
        """execute() creates BrickSet with owner_initial_estimate=None."""
        command = CreateBrickSetCommand(
            number=67890,
            production_status=ProductionStatus.RETIRED,
            completeness=Completeness.INCOMPLETE,
            has_instructions=False,
            has_box=False,
            is_factory_sealed=False,
            owner_initial_estimate=None,
        )
    
>       result = self.service.execute(command, self.user)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/services/tests/test_brickset_create_service.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #67890 (Incomplete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
___ CreateBrickSetServiceTests.test_execute_dto_has_initial_aggregate_values ___

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_dto_has_initial_aggregate_values>

    def test_execute_dto_has_initial_aggregate_values(self) -> None:
        """execute() returns DTO with initial aggregate values."""
        command = CreateBrickSetCommand(
            number=33333,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
    
>       result = self.service.execute(command, self.user)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/services/tests/test_brickset_create_service.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #33333 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
_ CreateBrickSetServiceTests.test_execute_duplicate_error_includes_constraint_name _

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_duplicate_error_includes_constraint_name>

    def test_execute_duplicate_error_includes_constraint_name(self) -> None:
        """execute() DuplicateError includes constraint name."""
        command1 = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
>       self.service.execute(command1, self.user)

catalog/services/tests/test_brickset_create_service.py:371: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
____ CreateBrickSetServiceTests.test_execute_persists_brickset_to_database _____

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_persists_brickset_to_database>

    def test_execute_persists_brickset_to_database(self) -> None:
        """execute() persists BrickSet to database."""
        initial_count = BrickSet.objects.count()
        command = CreateBrickSetCommand(
            number=44444,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
    
>       self.service.execute(command, self.user)

catalog/services/tests/test_brickset_create_service.py:123: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #44444 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
_ CreateBrickSetServiceTests.test_execute_raises_duplicate_error_for_identical_combination _

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_raises_duplicate_error_for_identical_combination>

    def test_execute_raises_duplicate_error_for_identical_combination(self) -> None:
        """execute() raises BrickSetDuplicateError for duplicate constraint."""
        # Create first BrickSet
        command1 = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
>       self.service.execute(command1, self.user)

catalog/services/tests/test_brickset_create_service.py:174: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
____ CreateBrickSetServiceTests.test_execute_returns_brickset_list_item_dto ____

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_returns_brickset_list_item_dto>

    def test_execute_returns_brickset_list_item_dto(self) -> None:
        """execute() returns BrickSetListItemDTO."""
        command = CreateBrickSetCommand(
            number=22222,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
    
>       result = self.service.execute(command, self.user)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/services/tests/test_brickset_create_service.py:90: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #22222 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
__________ CreateBrickSetServiceTests.test_execute_sets_correct_owner __________

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_sets_correct_owner>

    def test_execute_sets_correct_owner(self) -> None:
        """execute() sets owner to provided user."""
        command = CreateBrickSetCommand(
            number=11111,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
    
>       result = self.service.execute(command, self.user)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/services/tests/test_brickset_create_service.py:73: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #11111 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
_ CreateBrickSetServiceTests.test_execute_transaction_rollback_on_integrity_error _

self = <test_brickset_create_service.CreateBrickSetServiceTests testMethod=test_execute_transaction_rollback_on_integrity_error>

    def test_execute_transaction_rollback_on_integrity_error(self) -> None:
        """execute() rolls back transaction on IntegrityError."""
        initial_count = BrickSet.objects.count()
    
        command1 = CreateBrickSetCommand(
            number=12345,
            production_status=ProductionStatus.ACTIVE,
            completeness=Completeness.COMPLETE,
            has_instructions=True,
            has_box=True,
            is_factory_sealed=False,
        )
>       self.service.execute(command1, self.user)

catalog/services/tests/test_brickset_create_service.py:324: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
_ TestCreateBrickSetView.test_post_creates_brickset_without_owner_initial_estimate _

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_creates_brickset_without_owner_initial_estimate>

    def test_post_creates_brickset_without_owner_initial_estimate(self) -> None:
        """POST without owner_initial_estimate creates BrickSet."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 67890,
            "production_status": "RETIRED",
            "completeness": "INCOMPLETE",
            "has_instructions": False,
            "has_box": False,
            "is_factory_sealed": False,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:93: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #67890 (Incomplete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
_____ TestCreateBrickSetView.test_post_duplicate_brickset_returns_conflict _____

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_duplicate_brickset_returns_conflict>

    def test_post_duplicate_brickset_returns_conflict(self) -> None:
        """POST duplicate BrickSet returns 409 Conflict."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 12345,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
        }
    
        # Create first
>       response1 = self.client.post(self.url, payload, format="json")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:265: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
____ TestCreateBrickSetView.test_post_new_brickset_visible_in_list_endpoint ____

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_new_brickset_visible_in_list_endpoint>

    def test_post_new_brickset_visible_in_list_endpoint(self) -> None:
        """POST created BrickSet is visible in GET list endpoint."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 55555,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:339: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #55555 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
________ TestCreateBrickSetView.test_post_persists_brickset_to_database ________

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_persists_brickset_to_database>

    def test_post_persists_brickset_to_database(self) -> None:
        """POST persists BrickSet to database."""
        self.client.force_authenticate(user=self.user)
        initial_count = BrickSet.objects.count()
        payload = {
            "number": 33333,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:161: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #33333 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
________ TestCreateBrickSetView.test_post_response_content_type_is_json ________

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_response_content_type_is_json>

    def test_post_response_content_type_is_json(self) -> None:
        """POST response Content-Type is application/json."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 12345,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:301: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
_______ TestCreateBrickSetView.test_post_response_has_correct_structure ________

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_response_has_correct_structure>

    def test_post_response_has_correct_structure(self) -> None:
        """POST response has correct JSON structure."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 12345,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:318: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
______ TestCreateBrickSetView.test_post_response_includes_all_dto_fields _______

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_response_includes_all_dto_fields>

    def test_post_response_includes_all_dto_fields(self) -> None:
        """POST response includes all BrickSetListItemDTO fields."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 22222,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
            "owner_initial_estimate": 500,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:131: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #22222 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
______ TestCreateBrickSetView.test_post_response_initial_aggregate_values ______

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_response_initial_aggregate_values>

    def test_post_response_initial_aggregate_values(self) -> None:
        """POST response has correct initial aggregate values."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 44444,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:361: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #44444 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
_______ TestCreateBrickSetView.test_post_response_status_code_is_created _______

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_response_status_code_is_created>

    def test_post_response_status_code_is_created(self) -> None:
        """POST response status code is 201 Created."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 12345,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:77: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
_________ TestCreateBrickSetView.test_post_returns_dto_with_all_fields _________

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_returns_dto_with_all_fields>

    def test_post_returns_dto_with_all_fields(self) -> None:
        """POST returns complete DTO with all required fields."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 99999,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
            "owner_initial_estimate": 1000,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:382: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #99999 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
______ TestCreateBrickSetView.test_post_sets_owner_to_authenticated_user _______

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_sets_owner_to_authenticated_user>

    def test_post_sets_owner_to_authenticated_user(self) -> None:
        """POST sets owner to authenticated user."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 11111,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
        }
    
>       response = self.client.post(self.url, payload, format="json")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

catalog/views/tests/test_brickset_create_view.py:111: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #11111 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
_______ TestCreateBrickSetView.test_post_with_valid_jwt_creates_brickset _______

self = <catalog.views.tests.test_brickset_create_view.TestCreateBrickSetView testMethod=test_post_with_valid_jwt_creates_brickset>

    def test_post_with_valid_jwt_creates_brickset(self) -> None:
        """POST with valid auth and payload creates BrickSet."""
        self.client.force_authenticate(user=self.user)
        payload = {
            "number": 12345,
            "production_status": "ACTIVE",
            "completeness": "COMPLETE",
            "has_instructions": True,
            "has_box": True,
            "is_factory_sealed": False,
            "owner_initial_estimate": 360,
        }
    
>       response = self.client.post(
            self.url,
            payload,
            format="json",
        )

catalog/views/tests/test_brickset_create_view.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:299: in post
    response = super().post(
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:213: in post
    return self.generic('POST', path, data, content_type, **extra)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:237: in generic
    return super().generic(
/usr/local/lib/python3.14/site-packages/django/test/client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:289: in request
    return super().request(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/test.py:241: in request
    request = super().request(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/test/client.py:1087: in request
    self.check_exception(response)
/usr/local/lib/python3.14/site-packages/django/test/client.py:802: in check_exception
    raise exc_value
/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py:197: in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py:65: in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/django/views/generic/base.py:105: in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:515: in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:475: in handle_exception
    self.raise_uncaught_exception(exc)
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:486: in raise_uncaught_exception
    raise exc
/usr/local/lib/python3.14/site-packages/rest_framework/views.py:512: in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/views/brickset_list.py:107: in post
    brickset_dto = service.execute(command, request.user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
catalog/services/brickset_create_service.py:32: in execute
    return self._build_dto(brickset)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

brickset = <BrickSet: Set #12345 (Complete)>

    @staticmethod
    def _build_dto(brickset: BrickSet) -> BrickSetListItemDTO:
        """Map BrickSet instance to list item DTO with initial values."""
>       return BrickSetListItemDTO(
            id=brickset.id,
            number=brickset.number,
            production_status=brickset.production_status,
            completeness=brickset.completeness,
            has_instructions=brickset.has_instructions,
            has_box=brickset.has_box,
            is_factory_sealed=brickset.is_factory_sealed,
            owner_id=brickset.owner_id,
            owner_initial_estimate=brickset.owner_initial_estimate,
            valuations_count=0,
            total_likes=0,
            top_valuation=None,
            created_at=brickset.created_at,
            updated_at=brickset.updated_at,
        )
E       TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'

catalog/services/brickset_create_service.py:81: TypeError
------------------------------ Captured log call -------------------------------
ERROR    django.request:log.py:253 Internal Server Error: /api/v1/bricksets
Traceback (most recent call last):
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/usr/local/lib/python3.14/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/usr/local/lib/python3.14/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.14/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/app/catalog/views/brickset_list.py", line 107, in post
    brickset_dto = service.execute(command, request.user)
  File "/app/catalog/services/brickset_create_service.py", line 32, in execute
    return self._build_dto(brickset)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/catalog/services/brickset_create_service.py", line 81, in _build_dto
    return BrickSetListItemDTO(
        id=brickset.id,
    ...<12 lines>...
        updated_at=brickset.updated_at,
    )
TypeError: BrickSetListItemDTO.__init__() got an unexpected keyword argument 'created_at'
=============================== warnings summary ===============================
account/models/user.py:97
  /app/account/models/user.py:97: RemovedInDjango60Warning: CheckConstraint.check is deprecated in favor of `.condition`.
    models.CheckConstraint(

account/models/user.py:101
  /app/account/models/user.py:101: RemovedInDjango60Warning: CheckConstraint.check is deprecated in favor of `.condition`.
    models.CheckConstraint(

catalog/models/brickset.py:107
  /app/catalog/models/brickset.py:107: RemovedInDjango60Warning: CheckConstraint.check is deprecated in favor of `.condition`.
    models.CheckConstraint(

catalog/models/brickset.py:111
  /app/catalog/models/brickset.py:111: RemovedInDjango60Warning: CheckConstraint.check is deprecated in favor of `.condition`.
    models.CheckConstraint(

valuation/models/valuation.py:61
  /app/valuation/models/valuation.py:61: RemovedInDjango60Warning: CheckConstraint.check is deprecated in favor of `.condition`.
    models.CheckConstraint(

valuation/models/valuation.py:65
  /app/valuation/models/valuation.py:65: RemovedInDjango60Warning: CheckConstraint.check is deprecated in favor of `.condition`.
    models.CheckConstraint(

../usr/local/lib/python3.14/site-packages/_pytest/config/__init__.py:1533
  /usr/local/lib/python3.14/site-packages/_pytest/config/__init__.py:1533: PytestConfigWarning: No files were found in testpaths; consider removing or adjusting your testpaths configuration. Searching recursively from the current directory instead.
    self.args, self.args_source = self._decide_args(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.14.0-final-0 ________________

Name                                          Stmts   Miss  Cover   Missing
---------------------------------------------------------------------------
account/apps.py                                   4      0   100%
account/authentication.py                        37      0   100%
account/exceptions.py                            19      2    89%   28-29
account/models/user.py                           21      0   100%
account/serializers/login.py                     17      0   100%
account/serializers/registration.py              14      0   100%
account/serializers/user_profile.py               8      0   100%
account/services/login_service.py                21      0   100%
account/services/logout_service.py                6      0   100%
account/services/registration_service.py         49      0   100%
account/services/token_provider.py               25      0   100%
account/services/user_profile_service.py         13      0   100%
account/throttling.py                            10     10     0%   2-33
account/views/login.py                           27      0   100%
account/views/logout.py                          17      0   100%
account/views/register.py                        24      0   100%
account/views/user_profile.py                    21      0   100%
catalog/apps.py                                   4      0   100%
catalog/exceptions.py                            11      3    73%   19-21
catalog/models/brickset.py                       41      4    90%   39, 43, 47, 51
catalog/serializers/brickset_create.py           19      0   100%
catalog/serializers/brickset_list.py             39      0   100%
catalog/services/brickset_create_service.py      39      3    92%   63-64, 75
catalog/services/brickset_list_service.py        56      0   100%
catalog/views/brickset_create.py                 26     12    54%   41-67
catalog/views/brickset_list.py                   47      6    87%   76-77, 109, 114-124
config/jwt_config.py                             10      0   100%
datastore/domains/account_dto.py                 32      0   100%
datastore/domains/catalog_dto.py                 78      0   100%
valuation/apps.py                                 4      0   100%
valuation/models/like.py                         14      0   100%
valuation/models/metrics.py                      12      0   100%
valuation/models/valuation.py                    26      2    92%   19, 22
valuation/signals.py                             26     17    35%   22-57, 62-67, 72-78
---------------------------------------------------------------------------
TOTAL                                           817     59    93%
Coverage HTML written to dir htmlcov
Required test coverage of 90% reached. Total coverage: 92.78%
=========================== short test summary info ============================
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_allows_same_number_different_completeness
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_allows_same_number_different_has_box
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_allows_same_number_different_has_instructions
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_allows_same_number_different_is_factory_sealed
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_allows_same_number_different_production_status
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_creates_brickset_with_all_fields
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_creates_brickset_without_estimate
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_dto_has_initial_aggregate_values
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_duplicate_error_includes_constraint_name
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_persists_brickset_to_database
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_raises_duplicate_error_for_identical_combination
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_returns_brickset_list_item_dto
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_sets_correct_owner
FAILED catalog/services/tests/test_brickset_create_service.py::CreateBrickSetServiceTests::test_execute_transaction_rollback_on_integrity_error
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_creates_brickset_without_owner_initial_estimate
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_duplicate_brickset_returns_conflict
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_new_brickset_visible_in_list_endpoint
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_persists_brickset_to_database
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_response_content_type_is_json
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_response_has_correct_structure
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_response_includes_all_dto_fields
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_response_initial_aggregate_values
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_response_status_code_is_created
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_returns_dto_with_all_fields
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_sets_owner_to_authenticated_user
FAILED catalog/views/tests/test_brickset_create_view.py::TestCreateBrickSetView::test_post_with_valid_jwt_creates_brickset
================= 26 failed, 251 passed, 7 warnings in 23.94s ==================
